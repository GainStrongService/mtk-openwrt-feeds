--- a/drivers/watchdog/mtk_wdt.c
+++ b/drivers/watchdog/mtk_wdt.c
@@ -262,21 +262,24 @@ static int mtk_wdt_set_timeout(struct wa
 {
 	struct mtk_wdt_dev *mtk_wdt = watchdog_get_drvdata(wdt_dev);
 	void __iomem *wdt_base = mtk_wdt->wdt_base;
+	unsigned int hw_timeout;
 	u32 reg;
 
 	wdt_dev->timeout = timeout;
+	hw_timeout = min(timeout, wdt_dev->max_hw_heartbeat_ms / 1000);
+
 	/*
-	 * In dual mode, irq will be triggered at timeout / 2
-	 * the real timeout occurs at timeout
+	 * In dual mode, irq will be triggered at hw_timeout / 2
+	 * the real timeout occurs at hw_timeout
 	 */
 	if (wdt_dev->pretimeout)
-		wdt_dev->pretimeout = timeout / 2;
+		wdt_dev->pretimeout = hw_timeout / 2;
 
 	/*
 	 * One bit is the value of 512 ticks
 	 * The clock has 32 KHz
 	 */
-	reg = WDT_LENGTH_TIMEOUT((timeout - wdt_dev->pretimeout) << 6)
+	reg = WDT_LENGTH_TIMEOUT((hw_timeout - wdt_dev->pretimeout) << 6)
 			| WDT_LENGTH_KEY;
 	iowrite32(reg, wdt_base + WDT_LENGTH);
 
