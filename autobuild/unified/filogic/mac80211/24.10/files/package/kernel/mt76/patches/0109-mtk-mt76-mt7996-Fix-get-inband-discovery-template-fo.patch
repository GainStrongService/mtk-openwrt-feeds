From c871b5f751a780518148efa59839f7f8a714a86e Mon Sep 17 00:00:00 2001
From: Allen Ye <allen.ye@mediatek.com>
Date: Wed, 6 Aug 2025 10:56:13 +0800
Subject: [PATCH 109/123] mtk: mt76: mt7996: Fix get inband discovery template
 for mld bss

Add link id parameter for getting correct inband discovery template.

Signed-off-by: Allen Ye <allen.ye@mediatek.com>
---
 mt7996/mcu.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/mt7996/mcu.c b/mt7996/mcu.c
index 8c3e4461..a056da67 100644
--- a/mt7996/mcu.c
+++ b/mt7996/mcu.c
@@ -4686,11 +4686,11 @@ int mt7996_mcu_beacon_inband_discov(struct mt7996_dev *dev,
 	if (changed & BSS_CHANGED_FILS_DISCOVERY &&
 	    link_conf->fils_discovery.max_interval) {
 		interval = link_conf->fils_discovery.max_interval;
-		skb = ieee80211_get_fils_discovery_tmpl(hw, vif);
+		skb = ieee80211_get_fils_discovery_tmpl(hw, vif, link_conf->link_id);
 	} else if (changed & BSS_CHANGED_UNSOL_BCAST_PROBE_RESP &&
 		   link_conf->unsol_bcast_probe_resp_interval) {
 		interval = link_conf->unsol_bcast_probe_resp_interval;
-		skb = ieee80211_get_unsol_bcast_probe_resp_tmpl(hw, vif);
+		skb = ieee80211_get_unsol_bcast_probe_resp_tmpl(hw, vif, link_conf->link_id);
 	}
 
 	if (!skb) {
-- 
2.45.2

