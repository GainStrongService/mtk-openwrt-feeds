From f251cc4aa4177d422b81fe7f8a00de7cac662706 Mon Sep 17 00:00:00 2001
From: Rex Lu <rex.lu@mediatek.com>
Date: Fri, 6 Sep 2024 15:32:05 +0800
Subject: [PATCH 037/105] mtk: mt76: mt7996: Fix call trace happened when wed
 attach fail

1. when we attech wed0 fail, we will not going to attach wed1

Signed-off-by: Rex Lu <rex.lu@mediatek.com>
---
 mt7996/mmio.c | 1 +
 1 file changed, 1 insertion(+)

diff --git a/mt7996/mmio.c b/mt7996/mmio.c
index 9d0d3f163..277978add 100644
--- a/mt7996/mmio.c
+++ b/mt7996/mmio.c
@@ -614,6 +614,7 @@ int mt7996_mmio_wed_init(struct mt7996_dev *dev, void *pdev_ptr,
 
 	if (mtk_wed_device_attach(wed)) {
 		dev->mt76.hwrro_mode = MT76_HWRRO_OFF;
+		wed_enable = false;
 		return 0;
 	}
 
-- 
2.45.2

