From b584f831a372c8d5420c49f2eb15582a0554d9bc Mon Sep 17 00:00:00 2001
From: Shayne Chen <shayne.chen@mediatek.com>
Date: Wed, 16 Jul 2025 20:58:16 +0800
Subject: [PATCH 110/128] mtk: cfg80211: fix crash in
 cfg80211_sta_set_mld_sinfo()

---
 net/wireless/nl80211.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/net/wireless/nl80211.c b/net/wireless/nl80211.c
index a2396fb6..08d20718 100644
--- a/net/wireless/nl80211.c
+++ b/net/wireless/nl80211.c
@@ -7870,7 +7870,7 @@ static void cfg80211_sta_set_mld_sinfo(struct station_info *sinfo)
 		init++;
 
 		/* pertid stats accumulate for rx/tx fields */
-		if (sinfo->pertid) {
+		if (sinfo->pertid && link_sinfo->pertid) {
 			sinfo->pertid->rx_msdu +=
 				link_sinfo->pertid->rx_msdu;
 			sinfo->pertid->tx_msdu +=
-- 
2.45.2

