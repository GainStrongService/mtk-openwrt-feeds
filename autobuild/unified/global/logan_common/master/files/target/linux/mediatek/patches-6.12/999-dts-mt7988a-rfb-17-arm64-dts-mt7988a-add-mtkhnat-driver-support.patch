From bd10ca032ceef852ece214d20aa60651a9bfa546 Mon Sep 17 00:00:00 2001
From: "chak-kei.lam" <chak-kei.lam@mediatek.com>
Date: Mon, 24 Nov 2025 17:39:11 +0800
Subject: [PATCH] arm64: dts: mt7988a: add mtkhnat driver support

---
 arch/arm64/boot/dts/mediatek/mt7988a-rfb.dts | 9 +++++++++
 arch/arm64/boot/dts/mediatek/mt7988a.dtsi    | 8 ++++++++
 2 files changed, 17 insertions(+)

diff --git a/arch/arm64/boot/dts/mediatek/mt7988a-rfb.dts b/arch/arm64/boot/dts/mediatek/mt7988a-rfb.dts
index 6443254..2e18f3c 100644
--- a/arch/arm64/boot/dts/mediatek/mt7988a-rfb.dts
+++ b/arch/arm64/boot/dts/mediatek/mt7988a-rfb.dts
@@ -181,6 +181,15 @@ &gsw_port3 {
 	label = "lan3";
 };
 
+&hnat {
+	mtketh-wan = "eth1";
+	mtketh-lan = "lan";
+	mtketh-lan2 = "eth2";
+	mtketh-max-gmac = <3>;
+	mtketh-ppe-num = <3>;
+	status = "okay";
+};
+
 &i2c0 {
 	pinctrl-names = "default";
 	pinctrl-0 = <&i2c0_pins>;
diff --git a/arch/arm64/boot/dts/mediatek/mt7988a.dtsi b/arch/arm64/boot/dts/mediatek/mt7988a.dtsi
index 014246d..3b07a9a 100644
--- a/arch/arm64/boot/dts/mediatek/mt7988a.dtsi
+++ b/arch/arm64/boot/dts/mediatek/mt7988a.dtsi
@@ -1242,6 +1242,14 @@ i2p5gbe_led1: i2p5gbe-led1@1 {
 			};
 		};
 
+		hnat: hnat@15000000 {
+			compatible = "mediatek,mtk-hnat_v5";
+			reg = <0 0x15100000 0 0x80000>;
+			resets = <&ethsys 0>;
+			reset-names = "mtketh";
+			status = "disabled";
+		};
+
 		wo_ccif0: syscon@151a5000 {
 			compatible = "mediatek,mt7988-wo-ccif", "syscon";
 			reg = <0 0x151a5000 0 0x1000>;
-- 
2.45.2

